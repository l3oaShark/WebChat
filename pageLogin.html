<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AMB Chat Room</title>
  <!-- <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script> -->
  <!-- <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"> -->
  <style>
  body {
    background-image: url('./immage/gtr35login.jpg');
    background-size:cover;
  }
  </style>
</head>
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js" charset="utf-8"></script>
        <script type="text/javascript">
          var socket = io();
          function setUsername() {
             socket.emit('setUsername', document.getElementById('name').value);
          };
          var user;
          socket.on('userExists', function(data) {
             document.getElementById('error-container').innerHTML = data;
          });
          socket.on('userSet', function(data) {
             //ชื่อไม่ซ้ำ เปลี่ยนหน้าจอ จากหน้าจอป้อนชื่อ เป็นหน้าจอสำหรับการสนทนา
             user = data.username;
             document.body.innerHTML = '<input type = "text" id = "message">\
             <button type = "button" name = "button" onclick = "sendMessage()">ส่ง</button>\
             <div id = "message-container"></div>';
          });
          function sendMessage() {
            var msg = document.getElementById('message').value;
            if(msg) {
               socket.emit('msg', {message: msg,user: user});
            }
          }
         socket.on('newmsg', function(data) {
           //การแสดงผล
            if(user) {
              document.getElementById('message-container').innerHTML += '<div><b>' +
              data.user + '</b>: ' + data.message + '</div>'
            }
         })
        </script>
<body>
  <ul>
    <!-- <input v-model="newData.userName"> -->
    <div id="error-container"></div>
<input id = "name" type="text" name = "name" value=""
placeholder = "Username">
  </ul>
  <ul>
    <!-- <input v-model="newData.Password"> -->
    <input id ="Password" type="text" name="Password" value=""
placeholder = "Password"
>
  </ul>
  <p><a href="http://localhost/Psti/webchat/pageRegister.html">Regisrter</a></p>
  <!-- <button class="w3-center" @click="addlogin">Login</button> -->
  <button type="button" name = "butoon" onclick="setUsername()">
    Login
</button>
  <p><a href="http://localhost/Psti/webchat/pageResetPasswordPage.html">Forgot Username/Password?</a></p>

</body>

  <!-- <script src="modelLogin.js" charset="utf-8"></script> -->
</body>
<!-- <script src="./outputs/login.js"></script> -->
</html>
